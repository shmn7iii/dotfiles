#!/bin/bash -eu

cd ~


echo "\n========================================"
echo " ğŸ Homebrew ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã‚ˆ"
echo "========================================\n"
if [ ! -f /usr/local/bin/brew ]
 then
  echo "Installing Homebrew..."
  /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh)"
 else
  echo "Homebrew already installed."
fi



echo "\n========================================"
echo " ğŸ shmn7iii/dotfiles ã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã™ã‚‹ã‚ˆ"
echo "========================================\n"
if [ ! -d ~/.shmn7iii/dotfiles ]
 then
  cd ~/.ssh
  ssh-keygen
  pbcopy < ~/.ssh/id_rsa.pub
  echo "ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«~/.ssh/id_rsa.pubã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸã€‚"
  echo "å…¬é–‹éµã‚’GitHubã«ç™»éŒ²ã—ã¦ãã ã•ã„ > "
  select yn in "Yes"; do
   case $yn in
    Yes ) break;;
   esac
  done

  echo "Cloning dotfiles..."
	mkdir ~/.shmn7iii
	cd ~/.shmn7iii
  git clone git@github.com:shmn7iii/dotfiles.git
 else
  echo "dotfiles already cloned."
fi



echo "\n========================================"
echo " ğŸ Brewfile ã®å†…å®¹ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã‚ˆ"
echo "========================================\n"
echo "Installing some software & library..."
brew update
brew upgrade
brew bundle -v --file=~/.shmn7iii/dotfiles/Brewfile



echo "\n========================================"
echo " ğŸ git-prompt,completion ã®è¨­å®šã‚’ã™ã‚‹ã‚ˆ"
echo "========================================\n"
mkdir ~/.zsh
echo "Installing git-prompt.sh"
curl -o ~/.zsh/git-prompt.sh https://raw.githubusercontent.com/git/git/master/contrib/completion/git-prompt.sh
echo "Installing git-completion.bash"
curl -o ~/.zsh/git-completion.bash https://raw.githubusercontent.com/git/git/master/contrib/completion/git-completion.bash
echo "Installing git-completion.zsh (rename to _git)"
curl -o ~/.zsh/_git https://raw.githubusercontent.com/git/git/master/contrib/completion/git-completion.zsh



echo "\n========================================"
echo " ğŸ .zshrc ã‚’é€£ã‚Œã¦ãã‚‹ã‚ˆ"
echo "========================================\n"
cp ~/.shmn7iii/dotfiles/.zshrc ~/.zshrc
source ~/.zshrc



echo "\n========================================"
echo " ğŸ .vimrc ã‚’é€£ã‚Œã¦ãã‚‹ã‚ˆ"
echo "========================================\n"
ln -fs ~/.shmn7iii/dotfiles/.vimrc ~/.vimrc



echo "\n========================================"
echo " ğŸ .config/git/ignore ã‚’é€£ã‚Œã¦ãã‚‹ã‚ˆ"
echo "========================================\n"
mkdir -p ~/.config/git
ln -fs ~/.shmn7iii/dotfiles/.config/git/ignore ~/.config/git/ignore



echo "\n========================================"
echo " ğŸ anyenv ã®è¨­å®šã‚’ã™ã‚‹ã‚ˆ"
echo "========================================\n"
ln -fs ~/.shmn7iii/dotfiles/.config/anyenv ~/.config/anyenv
anyenv init
anyenv install --init



echo "\n========================================"
echo " ğŸ mac ç‰¹æœ‰ã®è¨­å®šã‚’ã™ã‚‹ã‚ˆ"
echo "========================================\n"
defaults write com.apple.finder QuitMenuItem -bool true
defaults write com.apple.dock springboard-columns -int 8
defaults write com.apple.dock springboard-rows -int 6
defaults write com.apple.dock ResetLaunchPad -bool TRUE
defaults write com.apple.Dock autohide-delay -float 0
killall Dock



echo "\n========================================"
echo " ğŸ source ~/.zshrc"
echo "========================================\n"
source ~/.zshrc



echo "\n========================================"
echo " ğŸ çµ‚äº†ï¼ï¼ï¼"
echo "========================================"
